<script setup lang="ts">
import zhCN from 'ant-design-vue/es/locale/zh_CN';
import { ref } from 'vue';
import { useRouter } from 'vue-router';
import { FolderOpenOutlined, HomeOutlined, BookOutlined, RocketOutlined, DeploymentUnitOutlined } from '@ant-design/icons-vue';
import { XProvider } from 'ant-design-x-vue';

const locale = zhCN;
const router = useRouter();
const activeIndex = ref('0');

const handleSelect = (event: { key: string }) => {
  const key = event.key;
  if (key === '0') {
    router.push('/');
  } else if (key === '1') {
    router.push('/knowledge');
  }
  else if (key === '2') {
    router.push('/memory');
  }
  else if (key === '3') {
    router.push('/model_cfg');
  }
};
</script>

<template>
  <XProvider :locale="locale">
    <a-layout style="height: 100vh; overflow: hidden;">
      <a-layout-sider 
        width="200" 
        theme="light"
        class="ant-layout-sider-custom"
      >
        <a-menu
          mode="inline"
          :default-selected-keys="[activeIndex]"
          @click="handleSelect"
          class="menu-container"
        >
          <a-menu-item key="0">
            <template #icon>
              <HomeOutlined />
            </template>
            <span>ğŸ  æ¸ é“</span>
          </a-menu-item>
          
          <a-menu-item key="1">
            <template #icon>
              <BookOutlined />
            </template>
            <span>ğŸ“š çŸ¥è¯†åº“ç®¡ç†</span>
          </a-menu-item>

          <a-menu-item key="2">
            <template #icon>
              <DeploymentUnitOutlined />
            </template>
            <span>ğŸ§  è®°å¿†ç®¡ç†</span>
          </a-menu-item>

          <a-menu-item key="3">
            <template #icon>
              <RocketOutlined />
            </template>
            <span>ğŸš€ æ¨¡å‹ç®¡ç†</span>
          </a-menu-item>
        </a-menu>
      </a-layout-sider>

      <a-layout>
        <a-layout-content class="content-wrapper">
          <router-view />
        </a-layout-content>
      </a-layout>
    </a-layout>
  </XProvider>
</template>

<style scoped>
/* ç§»é™¤é»˜è®¤è¾¹è· */
:deep(.ant-layout) {
  margin: 0;
  padding: 0;
}

.ant-layout-sider-custom {
  background: #fff;
  border-right: 1px solid #e8e8e8;
  height: 100vh;
  box-shadow: 2px 0 6px rgba(0, 0, 0, 0.1); /* æ·»åŠ é˜´å½± */
  border-radius: 0 8px 8px 0; /* æ·»åŠ åœ†è§’ */
}

.menu-container {
  border-right: 0;
  height: calc(100vh - 16px); /* ç•™å‡ºæ»šåŠ¨æ¡ç©ºé—´ */
  padding: 8px 0;
}

.content-wrapper {
  padding: 20px;
  height: 100vh;
  overflow-y: auto;
  background: #f0f2f5;
  border-radius: 8px; /* æ·»åŠ åœ†è§’ */
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1); /* æ·»åŠ é˜´å½± */
}
</style>

<style>
/* å…¨å±€æ ·å¼é‡ç½® */
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
}

#app {
  height: 100vh;
}

/* è°ƒæ•´èœå•é¡¹æ ·å¼ */
.ant-menu-item {
  margin: 4px 8px !important;
  border-radius: 4px;
  transition: background-color 0.3s ease; /* æ·»åŠ è¿‡æ¸¡æ•ˆæœ */
}

.ant-menu-item-selected {
  background-color: #e6f7ff !important;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1); /* æ·»åŠ é€‰ä¸­çŠ¶æ€é˜´å½± */
}
</style>